<div class="title-container">
    <h2 class="title">Institute management</h2>
    <button
        ng-click="vm.openInstituteModal()"
        class="btn btn-primary btn-add-institute">
        Create new institute<i class="fas fa-plus fa-right"></i>
    </button>
</div>

<span class="d-print-none">Search for an institute to edit or delete</span>
<div class="dropdown-container add-scroll search-field-container">
    <input
        type="text"
        class="form-control"
        ng-model="vm.selectedInstitute"
        uib-typeahead="institute as vm.formatInstitute(institute) for institute in vm.getInstitutes($viewValue)"
        typeahead-loading="searching"
        data-ng-required="true"
        placeholder="Search institute"
        ng-model-options="{ allowInvalid: true }"
        typeahead-editable="false"
        typeahead-select-on-blur="true"
        typeahead-wait-ms="300"
        ng-keydown="vm.onInstituteSearchKey($event)">
</div>

<div
    ng-if="vm.selectedInstitute"
    class="card institute-card">
    <div class="card-body">
        <h3><i class="fas fa-university fa-left"></i>Institute details</h3>
        <ul class="institute-listing">
            <li>
                <strong>Id</strong>: {{ vm.selectedInstitute.id }}
            </li>
            <li>
                <strong>Name</strong>: {{ vm.selectedInstitute.name }}
            </li>
            <li>
                <strong>Country</strong>: {{ vm.selectedInstitute.country }}
            </li>
            <li>
                <strong>City</strong>: {{ vm.selectedInstitute.city }}
            </li>
            <li>
                <strong>Shortname</strong>: {{ vm.selectedInstitute.shortname }}
            </li>
            <li>
                <strong>Scopus Id</strong>: {{ vm.selectedInstitute.scopusId }}
            </li>
            <li>
                <strong>Group</strong>: {{ vm.selectedInstitute.group }}
            </li>
            <li>
                <strong>Parent Id</strong>: {{ vm.selectedInstitute.parentId }}
            </li>
            <li>
                <strong>Created at</strong>: {{ vm.selectedInstitute.createdAt | date:'yyyy-MM-dd HH:mm' }}
            </li>
            <li>
                <strong>Updated at</strong>: {{ vm.selectedInstitute.updatedAt | date:'yyyy-MM-dd HH:mm' }}
            </li>
            <li>
                <ul class="institute-buttons">
                    <li>
                        <button
                            class="btn btn-primary"
                            ng-click="vm.editInstitute()">
                            Edit
                        </button>
                    </li>
                    <li>
                        <button
                            class="btn btn-primary"
                            scientilla-click-confirm="Are you sure?"
                            ng-click="vm.deleteInstitute()"
                            href="javascript:void(0)">
                            Delete
                        </button>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
</div>