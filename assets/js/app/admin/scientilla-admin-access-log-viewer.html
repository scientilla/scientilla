<div class="admin-access-log-viewer">
    <h2>Access log viewer</h2>

    <ul class="admin-access-log-viewer-menu">
        <li>
            <div class="form-group">
                <label for="date">Date</label>
                <div class="select-wrapper date-selector">
                    <select
                        name="date"
                        id="date"
                        class="form-control"
                        ng-model="vm.date"
                        ng-options="date for date in vm.dates">
                    </select>
                </div>
            </div>
        </li>
        <li>
            <div class="button-container">
                <button
                    class="btn btn-primary"
                    type="submit"
                    ng-click="vm.refreshLogs()"
                    ng-disabled="vm.refreshingLogs"
                >
                    <span ng-if="!vm.refreshingLogs">
                        Load access log
                    </span>
                    <span ng-if="vm.refreshingLogs">
                        <i class="fas fa-spinner fa-left fa-spin"></i>Loading access log
                    </span>
                </button>
            </div>
        </li>
        <li>
            <div class="button-container">
                <button
                    class="btn btn-outline-secondary"
                    type="submit"
                    ng-click="vm.getAccessLogs()"
                    ng-disabled="vm.refreshingDates || vm.refreshingLogs">
                    <span ng-if="!vm.refreshingDates">
                        <i class="fas fa-sync fa-left"></i>Refresh dates
                    </span>
                    <span ng-if="vm.refreshingDates">
                        <i class="fas fa-sync fa-left fa-spin"></i>Refreshing dates
                    </span>
                </button>
            </div>
        </li>
        <li>
            <div class="button-container">
                <button
                    class="btn btn-outline-secondary"
                    type="submit"
                    ng-click="vm.download()"
                >
                    <i class="fas fa-download fa-left"></i>Download log output
                    </span>
                </button>
            </div>
        </li>
    </ul>

    <label>Access log output</label>

    <div class="table-responsive">
        <table class="table table-striped table-condensed">
            <tr>
                <th>Timestamp</th>
                <th>Path</th>
                <th>Method</th>
                <th>IP</th>
            </tr>
            <tr ng-repeat="line in vm.file track by $index">
                <td>{{line.timestamp}}</td>
                <td>{{line.path}}</td>
                <td>{{line.method}}</td>
                <td>{{line.ip}}</td>
            </tr>
        </table>
    </div>
</div>
