<documentation-layout>
    <div class="documentation">
        <div class="container">
            <h1>Documentation</h1>
            <div class="page-description">
                <p>On this page you can find information about the <strong>Scientilla</strong> API endpoints that you
                    can use.</p>
            </div>

            <h2>Profile</h2>
            <div class="sub-description">
                <p>This is a collection of information about the API endpoints regarding the user profile.</p>
            </div>

            <ul class="documentation-listing">
                <li id="get-profile-of-all-users">
                    <h3>Get the profile of all users</h3>
                    <p>You can get the profile of all users by using this API endpoint. You will receive an object with
                        the number of items and an array of profile objects.</p>
                    <pre data-type="get">
                        <code>/api/v1/userData?limit=0</code>
                    </pre>

                    <bearer-token></bearer-token>

                    <p><strong>Success response</strong></p>
                    <documentation-user-object-table></documentation-user-object-table>
                </li>
                <li id="get-profile-of-specific-user">
                    <h3>Get the profile of a specific user</h3>
                    <p>You can get a profile of a specific user by using the email address of the user.</p>
                    <pre data-type="get">
                        <code>/api/v1/users/username/:email/profile</code>
                    </pre>

                    <p><strong>Parameter</strong></p>
                    <table class="table table-bordered">
                        <tr>
                            <th>Field</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>email</td>
                            <td>String</td>
                            <td>The users email address.</td>
                        </tr>
                    </table>

                    <bearer-token></bearer-token>

                    <p><strong>Success response</strong></p>
                    <documentation-user-object-table></documentation-user-object-table>

                    <p><strong>Error response</strong><br>If you are trying to get a not existing profile you will
                        receive the following result:</p>
                    <pre>
                        <code>{<br>&nbsp;&nbsp;&nbsp;&nbsp;"error": "404 not found",<br>&nbsp;&nbsp;&nbsp;&nbsp;"item": {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"username": "john.doe@iit.it"<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}</code>
                    </pre>
                </li>
                <li id="get-profile-image-of-specific-user">
                    <h3>Get the profile image of a specific user</h3>
                    <p></p>
                    <pre data-type="get">
                        <code>/api/v1/users/username/:email/profile-image</code>
                    </pre>

                    <p><strong>Parameter</strong></p>
                    <table class="table table-bordered">
                        <tr>
                            <th>Field</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>email</td>
                            <td>String</td>
                            <td>The users email address.</td>
                        </tr>
                    </table>

                    <p>
                        <strong>Success response</strong><br>
                        This will return the URL of the image, this can be used directly into the image source
                        attribute.
                    </p>
                    <pre>
                        <code>/api/v1/users/username/john.doe@iit.it/profile-image</code>
                    </pre>

                    <p><strong>Error responses</strong></p>

                    <p>When a user doesn't exist you will receive a <strong>404 Not Found</strong> response with
                        following message:</p>
                    <pre>
                        <code>{<br>&nbsp;&nbsp;&nbsp;&nbsp;"message": "User not found!"<br>}</code>
                    </pre>

                    <p>When a user doesn't have a profile you will receive a <strong>404 Not Found</strong> response
                        with following message:</p>
                    <pre>
                        <code>{<br>&nbsp;&nbsp;&nbsp;&nbsp;"message": "Profile not found!"<br>}</code>
                    </pre>

                    <p>When a user doesn't have a public profile you will receive a <strong>403 Forbidden</strong>
                        response with following message:</p>
                    <pre>
                        <code>{<br>&nbsp;&nbsp;&nbsp;&nbsp;"message": "This profile is not public!"<br>}</code>
                    </pre>

                    <p>When a user doesn't have a public image you will receive a <strong>403 Forbidden</strong>
                        response with following message:</p>
                    <pre>
                        <code>{<br>&nbsp;&nbsp;&nbsp;&nbsp;"message": "This image is not public!"<br>}</code>
                    </pre>

                    <p>When a user has a public image but it cannot be found you will receive a <strong>404 Not
                        found</strong> response with following message:</p>
                    <pre>
                        <code>{<br>&nbsp;&nbsp;&nbsp;&nbsp;"message": "Image is not public!"<br>}</code>
                    </pre>
                </li>
            </ul>

            <br/>
            <br/>
            <br/>
            <br/>

            <h2>Project</h2>
            <div class="sub-description">
                <p>This is a collection of information about the API endpoints regarding the projects.</p>
            </div>

            <ul class="documentation-listing">
                <li id="project">
                    <h3>Projects API overview</h3>
                    <p>
                        You can query the API by user (username/email) or group (CDR/code),
                        You will receive an object with the number of items and an array of objects describing the
                        projects of the research entity.
                    </p>
                    <p>
                        To get IIT projects use the group endopoint and use <i>istituto-italiano-di-tecnologia</i> as
                        slug or <i>IIT1.01DS</i> as code
                    </p>
                    <p><strong>Query</strong></p>
                    <p>Here some examples to query the API (the where json should be URL encoded)</p>
                    <p>To get the elements where projectType equals <code>?projectType=fd</code></p>
                    <p>To get the elements where projectType contains fd
                        <code>?where={projectType:{contains:'fd'}}</code></p>
                    <p>To search a word in the title and abstract <code>?where={or:[title:{contains:'a'},abstract:{contains:'a'}]}</code>
                    </p>
                    <p>To search for a pi and co-pi <code>?where={piStr:{contains:'name'}}</code></p>
                    <p>To search for a specific status <code>?status=working</code> or <code>?status=ended</code></p>
                    <p>To filter by year range <code>?where={yearFrom:{'>=':'2010'},yearTo:{'<=':2020}}</code></p>
                    <p>To filter by role <code>?role=coordinator</code></p>
                    </p>

                    <bearer-token></bearer-token>
                </li>

                <li id="get-specific-projects">
                    <h3>Search for one or more projects in the system with a specific code</h3>
                    <pre data-type="get">
                        <code>/api/v1/publicCompetitiveProjects?code={code}</code>
                    </pre>
                    <p>note: by specifying the id will be returned only the project object</p>

                    <h3>Gets a single project with the specified id</h3>
                    <pre data-type="get">
                        <code>/api/v1/publicCompetitiveProjects/{projectId}</code>
                    </pre>

                </li>

                <li id="get-projects-of-specific-group">
                    <h3>Get the projects of a specific group</h3>
                    <pre data-type="get">
                        <code>/api/v1/groups/slug/{slug}/competitive-projects</code>
                    </pre>
                    <pre data-type="get">
                        <code>/api/v1/groups/code/{code/cdr}/competitive-projects</code>
                    </pre>

                    <p><strong>Success response</strong></p>
                    <documentation-project-object-table></documentation-project-object-table>
                </li>

                <li id="get-projects-of-specific-user">
                    <h3>Get the projects of a specific user</h3>
                    <pre data-type="get">
                        <code>/api/v1/users/username/{email}/competitive-projects</code>
                    </pre>

                    <p><strong>Success response</strong></p>
                    <documentation-project-object-table></documentation-project-object-table>
                </li>
            </ul>
        </div>
    </div>
</documentation-layout>